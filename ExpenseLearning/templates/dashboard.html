{% extends 'base.html' %}

{% block title %}Dashboard{% endblock %}

{% block content %}

<style>
    /* ================= DASHBOARD HEADER ================= */
    h1 {
        font-size: 26px;
        font-weight: 600;
        margin-bottom: 25px;
        color: #1f2937;
    }

    /* ================= FILTER FORM ================= */
    form {
        display: flex;
        align-items: center;
        gap: 12px;
        background-color: #ffffff;
        padding: 18px 20px;
        border-radius: 14px;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.08);
        width: fit-content;
    }

    form label {
        font-size: 14px;
        font-weight: 600;
        color: #374151;
    }

    form select {
        padding: 10px 12px;
        border-radius: 10px;
        border: 1px solid #e5e7eb;
        font-size: 14px;
    }

    form select:focus {
        outline: none;
        border-color: #2563eb;
        box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.15);
    }

    form button {
        padding: 10px 18px;
        background: linear-gradient(135deg, #2563eb, #06b6d4);
        border: none;
        border-radius: 10px;
        color: #ffffff;
        font-size: 14px;
        font-weight: 600;
        cursor: pointer;
        transition: transform 0.25s ease, box-shadow 0.25s ease;
    }

    form button:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 18px rgba(37, 99, 235, 0.35);
    }

    /* ================= TABLE SPACING ================= */
    table {
        margin-top: 30px;
    }

    /* ================= ACTION BUTTON ALIGNMENT ================= */
    td .btn {
        margin: 0 4px;
    }

    /* ================= TOTAL EXPENSE ================= */
    h3 {
        margin-top: 25px;
        font-size: 18px;
        font-weight: 600;
        color: #1f2937;
    }

    /* ================= EMPTY STATE ================= */
    table tr td[colspan] {
        color: #6b7280;
        font-style: italic;
    }

    /* ================= RESPONSIVE ================= */
    @media (max-width: 768px) {
        form {
            flex-direction: column;
            align-items: flex-start;
            width: 100%;
        }

        form button {
            width: 100%;
        }
    }
</style>

<h1>Dashboard</h1>

<form method="GET">
    <label>Filter by Category:</label>
    <select name="category">
        <option value="">All</option>
        <option value="Food" {% if selected_food %}selected{% endif %}>Food</option>
        <option value="Travel" {% if selected_travel %}selected{% endif %}>Travel</option>
        <option value="Shopping" {% if selected_shopping %}selected{% endif %}>Shopping</option>
        <option value="Rent" {% if selected_rent %}selected{% endif %}>Rent</option>
        <option value="Others" {% if selected_others %}selected{% endif %}>Others</option>
    </select>
    <button type="submit">Filter</button>
</form>

<table>
    <tr>
        <th>Sl No</th>
        <th>Category</th>
        <th>Amount</th>
        <th>Description</th>
        <th>Actions</th>
    </tr>

    {% for expense in expenses %}
    <tr>
        <td>{{ forloop.counter }}</td>
        <td>{{ expense.category }}</td>
        <td>₹ {{ expense.amount }}</td>
        <td>{{ expense.description }}</td>
        <td>
            <a class="btn btn-edit" href="{% url 'edit_expense' expense.id %}">Edit</a>
            <a class="btn btn-delete" href="{% url 'delete_expense' expense.id %}"
               onclick="return confirm('Are you sure?');">Delete</a>
        </td>
    </tr>
    {% endfor %}
</table>

<h3>Total Expense: ₹ {{ total }}</h3>

{% endblock %}
